# ==============================================================================
# Test Environment Configuration
# ==============================================================================
# This file contains test-specific settings for running automated tests
# ==============================================================================

NODE_ENV=test
APP_VERSION=0.1.0-test

# Server - random port allocation for parallel tests
HOST=127.0.0.1
PORT=0

# Logging - minimal logging during tests
LOG_LEVEL=warn
LOG_PRETTY=false
LOG_REQUESTS=false
LOG_RESPONSES=false

# Test database (use separate database)
DATABASE_URL=postgresql://dmp_app:dmp_secure_password@localhost:5432/dmp_test_db
DB_SSL=false
DB_POOL_MIN=1
DB_POOL_MAX=2

# Redis - separate database for tests
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=1
REDIS_KEY_PREFIX=code-reviewer-test:

# CORS - permissive for testing
CORS_ORIGINS=*
CORS_CREDENTIALS=true

# No rate limiting in tests
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100000

# Authentication - simple test secrets
JWT_ALGORITHM=HS256
JWT_SECRET=test-secret-for-automated-testing-at-least-32-chars-long
ACCESS_TOKEN_TTL=3600
REFRESH_TOKEN_TTL=86400
SESSION_SECRET=test-session-secret-for-testing-at-least-32-chars

# Feature flags - minimal features for testing
FEATURE_ASYNC_SCANNING=false
FEATURE_WEBHOOKS=false
FEATURE_METRICS=false
FEATURE_CACHING=false
FEATURE_GRAPHQL=false
DEBUG_MODE=false
VERBOSE_ERRORS=true

# Detection - fast timeouts for tests
DETECTION_TIMEOUT_PER_FILE=5000
DETECTION_TOTAL_TIMEOUT=30000
DETECTION_PARALLEL_DETECTORS=1
DETECTION_ENABLE_CACHING=false
DETECTION_MAX_FILES_PER_SCAN=100

# Storage - isolated test storage
STORAGE_PROVIDER=local
STORAGE_LOCAL_PATH=/tmp/code-reviewer-test

# Monitoring - disabled in tests
PROMETHEUS_ENABLED=false
HEALTH_CHECK_ENABLED=false

# Tenant configuration
TENANT_REQUIRED=false
